# Orchestration Strategy Questions for Planning Phase
# Asked during /ccu:plan to determine execution strategy
# Version: 1.0

meta:
  version: "1.0"
  framework: "CCU 2.0"
  phase: 6
  purpose: "Determine optimal orchestration strategy for development execution"

# ===================================================================
# TRACK-SPECIFIC QUESTIONS
# ===================================================================

instant_track:
  questions_count: 0
  description: "INSTANT track uses automatic orchestration - no questions needed"
  auto_strategy: "rapid_mvp"

rapid_track:
  questions_count: 1
  questions:
    - id: "execution_strategy"
      sequence: 1
      category: "orchestration"
      prompt: |
        ğŸš€ EXECUTION STRATEGY
        â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        Based on your {modules.count} modules ({modules.names}), how should we execute development?

      options:
        - id: "sequential"
          label: "Sequential Module Development (/ccu:develop)"
          description: |
            â€¢ Build each module one at a time
            â€¢ Single agent carries full context
            â€¢ Easier debugging and iteration
            â€¢ Total time: ~{time.sequential} minutes
            â€¢ Best for: Learning, debugging, simple projects
          command: "/ccu:develop"
          icon: "ğŸ“"

        - id: "parallel"
          label: "Parallel Agent Orchestration (/ccu:deliver) [RECOMMENDED]"
          description: |
            â€¢ Multiple specialist agents work simultaneously
            â€¢ {agents.count} agents in {waves.count} waves
            â€¢ Each agent has isolated 200k token context
            â€¢ Total time: ~{time.parallel} minutes ({time.savings}% faster!)
            â€¢ Best for: Speed, quality, production projects
          command: "/ccu:deliver"
          icon: "âš¡"
          default: true

        - id: "hybrid"
          label: "Hybrid Approach (/ccu:deliver --mode=hybrid)"
          description: |
            â€¢ Critical path sequential, rest parallel
            â€¢ Balance of speed and safety
            â€¢ Total time: ~{time.hybrid} minutes
            â€¢ Best for: Complex dependencies, phased rollout
          command: "/ccu:deliver --mode=hybrid"
          icon: "ğŸ”€"

      ai_recommendation: |
        Based on complexity analysis: {complexity.level}
        Recommended: {recommended.option} - {recommended.reason}

standard_track:
  questions_count: 2
  questions:
    - id: "execution_strategy"
      sequence: 1
      category: "orchestration"
      prompt: |
        ğŸš€ EXECUTION STRATEGY
        â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        Complexity detected: {complexity.level} ({complexity.score} points)
        Modules: {modules.count} | Estimated effort: {effort.hours} hours

        How should we orchestrate the development?

      options:
        - id: "sequential"
          label: "Traditional Sequential (/ccu:develop)"
          description: |
            â€¢ Module-by-module development
            â€¢ Single context thread
            â€¢ Time: ~{time.sequential} minutes
            â€¢ Risk: Lower (easier to debug)

        - id: "core_trio"
          label: "Core Trio Pattern (/ccu:deliver) [RECOMMENDED]"
          description: |
            â€¢ Wave 1: Product Manager + Designer + Architect (parallel)
            â€¢ Wave 2: Backend + Frontend + QA (parallel)
            â€¢ Wave 3: Integration & Review
            â€¢ Time: ~{time.parallel} minutes ({time.savings}% faster!)
            â€¢ Risk: Managed (checkpoints every 5 min)
          default: true

        - id: "custom"
          label: "Custom Wave Configuration"
          description: |
            â€¢ Define your own wave structure
            â€¢ Choose specific agents per wave
            â€¢ Full control over parallelization
          interactive: true

    - id: "wave_breakdown"
      sequence: 2
      category: "orchestration"
      condition: "execution_strategy != sequential"
      prompt: |
        ğŸ“Š WAVE CONFIGURATION
        â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        How should we structure the execution waves?

      options:
        - id: "standard_waves"
          label: "Standard 3-Wave Pattern"
          description: |
            Wave 1: Planning (10 min) - PM, Designer, Architect
            Wave 2: Implementation (20 min) - Backend, Frontend, QA
            Wave 3: Integration (10 min) - Architect review
          default: true

        - id: "compressed_waves"
          label: "Compressed 2-Wave Pattern"
          description: |
            Wave 1: Planning + Backend (15 min)
            Wave 2: Frontend + Testing + Integration (15 min)

        - id: "extended_waves"
          label: "Extended 4-Wave Pattern"
          description: |
            Wave 1: Deep Planning (15 min)
            Wave 2: Core Development (20 min)
            Wave 3: Testing & Review (15 min)
            Wave 4: Polish & Documentation (10 min)

enterprise_track:
  questions_count: 3
  questions:
    - id: "execution_strategy"
      sequence: 1
      category: "orchestration"
      prompt: |
        ğŸ¢ ENTERPRISE EXECUTION STRATEGY
        â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        Enterprise complexity detected: {complexity.level}
        Modules: {modules.count} | Teams required: {teams.estimate}
        Compliance: {compliance.required} | Security: {security.level}

        Select orchestration approach:

      options:
        - id: "enterprise_comprehensive"
          label: "Enterprise Comprehensive Pattern [RECOMMENDED]"
          description: |
            â€¢ 4-5 waves with specialized teams
            â€¢ Includes compliance and security validation
            â€¢ Full documentation generation
            â€¢ Time: ~{time.enterprise} minutes
            â€¢ Parallel agents: up to {agents.max}
          default: true

        - id: "phased_enterprise"
          label: "Phased Enterprise Rollout"
          description: |
            â€¢ Phase 1: Core platform (Day 1)
            â€¢ Phase 2: Service layer (Day 2)
            â€¢ Phase 3: Integration & Testing (Day 3)
            â€¢ Allows for stakeholder checkpoints

        - id: "microservices"
          label: "Microservices Parallel Development"
          description: |
            â€¢ Each service gets dedicated agent
            â€¢ Up to 6 services in parallel
            â€¢ Service mesh coordination
            â€¢ Time: Varies by service count

    - id: "team_structure"
      sequence: 2
      category: "organization"
      prompt: |
        ğŸ‘¥ TEAM ORGANIZATION
        â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        How should we organize the development teams?

      options:
        - id: "feature_teams"
          label: "Feature Teams"
          description: |
            â€¢ Cross-functional teams per feature
            â€¢ Each team has backend, frontend, QA
            â€¢ Parallel feature development

        - id: "layer_teams"
          label: "Layer-Based Teams"
          description: |
            â€¢ Dedicated backend team
            â€¢ Dedicated frontend team
            â€¢ Dedicated QA/DevOps team
            â€¢ Clear handoffs between layers
          default: true

        - id: "service_teams"
          label: "Service Teams"
          description: |
            â€¢ Team per microservice
            â€¢ Full ownership per service
            â€¢ Independent deployment

    - id: "compliance_validation"
      sequence: 3
      category: "governance"
      prompt: |
        ğŸ”’ COMPLIANCE & VALIDATION
        â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        What level of validation and compliance checking is required?

      options:
        - id: "standard_validation"
          label: "Standard Validation"
          description: |
            â€¢ Code quality checks
            â€¢ Security scanning
            â€¢ Test coverage validation
            â€¢ Performance benchmarks

        - id: "regulatory_compliance"
          label: "Regulatory Compliance"
          description: |
            â€¢ GDPR compliance checks
            â€¢ HIPAA validation (if healthcare)
            â€¢ PCI DSS (if payments)
            â€¢ SOC 2 requirements
            â€¢ Audit trail generation
          default: true

        - id: "comprehensive_governance"
          label: "Comprehensive Governance"
          description: |
            â€¢ All regulatory checks
            â€¢ Architecture review board
            â€¢ Security team sign-off
            â€¢ Change advisory board
            â€¢ Documentation review

# ===================================================================
# DYNAMIC QUESTION GENERATION
# ===================================================================

dynamic_questions:
  complexity_based:
    - trigger: "complexity.score > 200"
      add_question:
        prompt: "This is a complex project. Should we auto-split into smaller deliverables?"
        options:
          - "Yes, split into 2-day chunks"
          - "Yes, split by module"
          - "No, keep as single deliverable"

    - trigger: "modules.count > 5"
      add_question:
        prompt: "With {modules.count} modules, should we limit parallel agents?"
        options:
          - "No limit (use all available)"
          - "Limit to 4 parallel agents"
          - "Limit to 6 parallel agents"

  architecture_based:
    - trigger: "architecture.type == 'microservices'"
      add_question:
        prompt: "Should each microservice get a dedicated agent?"
        options:
          - "Yes, one agent per service"
          - "No, group related services"
          - "Mixed approach"

    - trigger: "architecture.type == 'serverless'"
      add_question:
        prompt: "How should we handle serverless function development?"
        options:
          - "Group functions by domain"
          - "Develop all functions in parallel"
          - "Sequential with shared libraries first"

# ===================================================================
# AI RECOMMENDATION ENGINE
# ===================================================================

recommendation_engine:
  factors:
    - name: "complexity"
      weight: 0.3
      rules:
        - "LIGHT -> sequential or rapid_mvp"
        - "STANDARD -> core_trio or implementation_wave"
        - "DEEP -> enterprise_comprehensive"

    - name: "time_pressure"
      weight: 0.3
      rules:
        - "urgent -> maximize parallelization"
        - "normal -> balanced approach"
        - "flexible -> optimize for quality"

    - name: "team_experience"
      weight: 0.2
      rules:
        - "new_team -> sequential for learning"
        - "experienced -> full parallel"
        - "mixed -> hybrid approach"

    - name: "risk_tolerance"
      weight: 0.2
      rules:
        - "low_risk -> more checkpoints"
        - "medium_risk -> standard checkpoints"
        - "high_risk -> rapid iteration"

  output_format: |
    ğŸ“Š AI Analysis Complete
    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    Complexity: {complexity.level} ({complexity.score})
    Time Savings: {time.savings}% with parallel execution
    Risk Level: {risk.level}

    âœ… Recommendation: {recommendation.strategy}
    Reason: {recommendation.reasoning}

    This will use:
    â€¢ {agents.count} specialist agents
    â€¢ {waves.count} execution waves
    â€¢ {time.parallel} minutes total time
    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”